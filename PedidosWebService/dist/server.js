(()=>{var e={234:e=>{e.exports={view:"select * from cliente where usuario=? and contrasena=?",add:"insert into persona(nombre,ci) values ($1,$2)",edit:"update persona set nombre=$1 , ci=$2 where id=$3",list:"select * from producto where idRestaurante=?",del:"delete from persona where id=$1"}},345:e=>{e.exports={view:"select * from detalle where idPedido=?",add:"insert into detalle(idPedido,idProducto,unidades,precioComision) values (?,?,?,?)"}},941:e=>{e.exports={view:"select *,\n\t(select GROUP_CONCAT(CONCAT(r.nombre,'-',d.unidades,'-',d.precioComision))\n\tfrom detalle d , producto r  where r.idProducto = d.idProducto and idPedido = p.idPedido) as detalle from pedido p where p.idcliente = ?",add:"insert into pedido(descripcion,fechaHoraPedido,fechaHoraEntrega,precioTotal,estadoPedido,idRestaurante,idCliente,idOperario) values (?,?,?,?,?,?,?,?)"}},401:e=>{e.exports={view:"select * from persona where ci=$1",add:"insert into persona(nombre,ci) values ($1,$2)",edit:"update persona set nombre=$1 , ci=$2 where id=$3",list:"select * from persona",del:"delete from persona where id=$1"}},849:e=>{e.exports={view:"select * from persona where ci=$1",add:"insert into persona(nombre,ci) values ($1,$2)",edit:"update persona set nombre=$1 , ci=$2 where id=$3",list:"select * from producto where idRestaurante=?",del:"delete from persona where id=$1"}},855:e=>{e.exports={view:"select * from persona where ci=$1",add:"insert into persona(nombre,ci) values ($1,$2)",edit:"update persona set nombre=$1 , ci=$2 where id=$3",list:"select * from restaurante",del:"delete from persona where id=$1"}},637:(e,s,o)=>{const r=o(860).Router(),d=o(759),t=o(234);r.get("/",(function(e,s){let o=[];o.push(e.query.usuario),o.push(e.query.contrasena),d.query(t.view,o,((e,o,r)=>{e?s.send(e):s.send(o)}))})),r.post("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),d.query(Persona.add,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.put("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),o.push(e.body.id),d.query(Persona.edit,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.delete("/",(function(e,s){let o=[];o.push(e.query.id),d.query(Persona.del,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),e.exports=r},626:(e,o,r)=>{const d=r(860).Router(),t=r(759),i=r(941),n=r(345);d.get("/",(function(e,o){let r=[];r.push(e.query.idcli),t.query(i.view,r,((e,r,d)=>{if(e)o.send(e);else{let e=r.map((e=>({idPedido:e.idPedido,descripcion:e.descripcion,fechaHoraPedido:e.fechaHoraPedido,fechaHoraEntrega:e.fechaHoraEntrega,precioTotal:e.precioTotal,estadoPedido:e.estadoPedido,idRestaurante:e.idRestaurante,idCliente:e.idCliente,idOperario:e.idOperario,detalle:e.detalle.split(",").map((e=>(s=e.split("-"),{nombre:s[0],cantidad:s[1],precio:s[2]})))})));o.send(e)}}))})),d.post("/",(function(e,s){let o=[];o.push(e.body.descripcion),o.push(e.body.pedido),o.push(e.body.entrega),o.push(e.body.total),o.push(e.body.estado),o.push(e.body.idres),o.push(e.body.idcli),o.push(e.body.idop);let r=Array.from(e.body.detalle);t.query(i.add,o,((e,o)=>{if(e)s.send(e);else{let e=o.insertId;r.map((s=>{let o=[];o.push(e),o.push(s.idProducto),o.push(s.cantidad),o.push(s.precio),t.query(n.add,o,((e,s)=>{}))})),s.send(o)}}))})),e.exports=d},535:(e,s,o)=>{const r=o(860).Router(),d=o(759),t=o(401);r.get("/",(function(e,s){let o=[];o.push(e.query.ci),d.query(0==e.query.ci?t.list:t.view,0==e.query.ci?[]:o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.post("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),d.query(t.add,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.put("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),o.push(e.body.id),d.query(t.edit,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.delete("/",(function(e,s){let o=[];o.push(e.query.id),d.query(t.del,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),e.exports=r},440:(e,s,o)=>{const r=o(860).Router(),d=o(759),t=o(849);r.get("/",(function(e,s){let o=[];o.push(e.query.idres),d.query(0!=e.query.idres?t.list:t.view,0==e.query.idres?[]:o,((e,o,r)=>{e?s.send(e):s.send(o)}))})),r.post("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),d.query(Persona.add,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.put("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),o.push(e.body.id),d.query(Persona.edit,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.delete("/",(function(e,s){let o=[];o.push(e.query.id),d.query(Persona.del,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),e.exports=r},915:(e,s,o)=>{const r=o(860).Router(),d=o(759),t=o(855);r.get("/",(function(e,s){let o=[];o.push(e.query.id),d.query(0==e.query.id?t.list:t.view,0==e.query.id?[]:o,((e,o,r)=>{e?s.send(e):s.send(o)}))})),r.post("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),d.query(Persona.add,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.put("/",(function(e,s){let o=[];o.push(e.body.nombre),o.push(e.body.ci),o.push(e.body.id),d.query(Persona.edit,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),r.delete("/",(function(e,s){let o=[];o.push(e.query.id),d.query(Persona.del,o,((e,o)=>{e?s.send(e):s.send(o.rows)}))})),e.exports=r},759:(e,s,o)=>{var r=o(744).createConnection({host:"127.0.0.1",user:"root",password:"12345",database:"bdpedidos"});r.connect(),e.exports=r},986:e=>{"use strict";e.exports=require("body-parser")},582:e=>{"use strict";e.exports=require("cors")},860:e=>{"use strict";e.exports=require("express")},470:e=>{"use strict";e.exports=require("morgan")},744:e=>{"use strict";e.exports=require("mysql")}},o={};function r(s){var d=o[s];if(void 0!==d)return d.exports;var t=o[s]={exports:{}};return e[s](t,t.exports,r),t.exports}(()=>{const e=r(860);var s=r(582),o=r(470),d=r(986);const t=r(535),i=r(915),n=r(440),u=r(637),p=r(626),a=e();a.use(s()),a.use(o("tiny")),a.use(d.json()),a.use(d.urlencoded({extended:!0})),a.use("/persona",t),a.use("/restaurante",i),a.use("/producto",n),a.use("/cliente",u),a.use("/pedido",p),a.listen(process.env.PORT||8081,(function(){console.log("Express app running on port "+(process.env.PORT||3e3))}))})()})();